var INSOURCED=INSOURCED||{};INSOURCED.app={params:{delay:8,dance_moves:["https://media.giphy.com/media/2oeyTMKbIZsHK/giphy.gif","https://media.giphy.com/media/3ohjVazBFR12PCzk3e/giphy.gif"],music_videos:[{video:"https://www.youtube.com/watch?v=9bZkp7q19f0",delay:8},{video:"https://www.youtube.com/watch?v=gr_T3gRdvc0",delay:15}]},init:()=>{let e=new URLSearchParams(window.location.search),a=!!e.get("v")&&e.get("v"),t=document.querySelector("input");a&&(t.value="https://www.youtube.com/watch?v="+a),document.querySelector("button").addEventListener("click",function(){let e=t.value,a=INSOURCED.app.getYouTubeID(e),o=a,n=document.querySelector(".stage");n.classList.remove("black-and-white"),window.history.pushState({},"","index.php?v="+o),INSOURCED.app.initialAnimation(),INSOURCED.app.instantiateYoutubePlayer(o)})},initialAnimation:()=>{let e=document.querySelector(".form"),a=document.querySelector(".left-curtain"),t=document.querySelector(".right-curtain"),o=document.querySelector("h1"),n=document.querySelector("h2");gsap.to(o,{duration:5,opacity:0,ease:"power4.out",delay:.95*INSOURCED.app.params.delay,top:"-50%"}),gsap.to(n,{duration:.5,opacity:0,ease:"power4.out",delay:.95*INSOURCED.app.params.delay}),gsap.to(a,{duration:3,left:"-40%",ease:"power4.out",delay:.97*INSOURCED.app.params.delay}),gsap.to(t,{duration:3,right:"-40%",ease:"power4.out",delay:.97*INSOURCED.app.params.delay}),gsap.to(e,{duration:.1,opacity:0,display:"none"}),gsap.fromTo("body",{backgroundColor:"#000"},{backgroundColor:"#000",delay:.3,duration:.5})},resetAnimations:()=>{},songAndDance:e=>{let a=0;gsap.fromTo(".dancing-man-wrapper",{scale:0,opacity:0},{opacity:1,scale:1,duration:1,ease:"elastic.out(1, 0.3)",delay:a})},getYouTubeID:e=>(e=e.split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/),void 0!==e[2]?e[2].split(/[^0-9a-z_\-]/i)[0]:e[0]),instantiateYoutubePlayer:e=>{var a=document.createElement("script");a.src="https://www.youtube.com/player_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(a,t),onYouTubePlayerAPIReady=(()=>{function a(){player.playVideo();let e=player.getVideoData().title,a=document.querySelector(".title");e=e.replace(/\([^)]*\)/g,""),a.innerHTML=e}function t(){let e=INSOURCED.app.params.delay,a=setInterval(function(){let t=player.getVideoData().video_id,o=player.getCurrentTime(),n=player.getDuration(),r=0;o=Math.round(100*o)/100,o>=n-1&&(clearInterval(a),player.seekTo(0),player.stopVideo()),o%.5==0&&(halfSeconds=o,r!==halfSeconds&&(halfSeconds===e&&(clearInterval(a),INSOURCED.app.songAndDance(t)),r=halfSeconds))})}player=new YT.Player("player",{height:"0",width:"0",videoId:e,playerVars:{playsinline:1,controls:0},events:{onReady:a,onStateChange:t}})})}},document.addEventListener("DOMContentLoaded",function(e){INSOURCED.app.init()});