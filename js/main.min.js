var INSOURCED=INSOURCED||{};INSOURCED.app={params:{delay:8,curated_gifs:!1,curated_videos:!0,youtube_playlist:!1,youtube_playlist_id:"PLpbDl3KW_-Gm9xAsAxX4qjTGMOnxX00sj",dance_moves:["https://media.giphy.com/media/2oeyTMKbIZsHK/giphy.gif","https://media.giphy.com/media/3ohjVazBFR12PCzk3e/giphy.gif","https://media.giphy.com/media/vl8ncD72EnhoA/giphy.gif","https://media.giphy.com/media/F6ub4AQXz13xK/giphy.gif","https://media.giphy.com/media/l4Ep3mmmj7Bw3adWw/giphy.gif","https://media.giphy.com/media/l378uHisF00ugOA36/giphy.gif","https://media.giphy.com/media/8NaEXnwY0vXoY/giphy.gif","https://media.giphy.com/media/6yG6GvvcN1Gr6/giphy.gif","https://media.giphy.com/media/11KrDRpNFYlG6I/giphy.gif","https://media.giphy.com/media/L0snCScL0LMBor5sE0/giphy.gif","https://media.giphy.com/media/ttAPTLzcauBFe/giphy.gif","https://media.giphy.com/media/KMuecXG7bC5dC/giphy.gif","https://media.giphy.com/media/Um27tTsg0mSdO/giphy.gif","https://media.giphy.com/media/iMC5iOzRhwcuFyRl13/giphy.gif","https://media.giphy.com/media/skJX0TcFaaPew/giphy-downsized-large.gif","https://media.giphy.com/media/p29xnqfmtZzY4/giphy.gif","https://media.giphy.com/media/3o85fVVwdqKYpt7F3G/giphy.gif","https://media.giphy.com/media/l41YkGAAkY1CUQnu0/giphy.gif","https://media.giphy.com/media/8oe1ekRC6kjPq/giphy.gif","https://media.giphy.com/media/zFZhzuLjKKA2A/giphy.gif","https://media.giphy.com/media/7QY5exgyuFHeo/giphy.gif"],music_videos:[{video:"https://www.youtube.com/watch?v=fuKDBPw8wQA",delay:10.5,artist:"Van Halen"},{video:"https://www.youtube.com/watch?v=gr_T3gRdvc0",delay:15,artist:"Nitzer Ebb"},{video:"https://www.youtube.com/watch?v=sPqnxFgCrhg",delay:16,artist:"Royksop"},{video:"https://www.youtube.com/watch?v=YW0sxgYAmLM",delay:8,artist:"Chaka Khan"},{video:"https://www.youtube.com/watch?v=CcNo07Xp8aQ",delay:8.5,artist:"Robyn"},{video:"https://www.youtube.com/watch?v=OcECxNgDltw",delay:5.75,artist:"New Order"},{video:"https://www.youtube.com/watch?v=PGNiXGX2nLU",delay:15.75,artist:"Dead Or Alive"},{video:"https://www.youtube.com/watch?v=djV11Xbc914",delay:20,artist:"A-Ha"},{video:"https://www.youtube.com/watch?v=Pwymq-gWhvY",delay:10,artist:"Rob Zombie"},{video:"https://www.youtube.com/watch?v=xat1GVnl8-k",delay:16.75,artist:"Bloodhound Gang"},{video:"https://www.youtube.com/watch?v=Nm-ISatLDG0",delay:12,artist:"Donna Summer"},{video:"https://www.youtube.com/watch?v=ysmVlaw36L0",delay:16,artist:"Yazoo"},{video:"https://www.youtube.com/watch?v=-iTQQT4yv94",delay:4,artist:"Manufacture"},{video:"https://www.youtube.com/watch?v=fcZOBOGMODI",delay:11.5,artist:"Electric Six"},{video:"https://www.youtube.com/watch?v=iTxOKsyZ0Lw",delay:9,artist:"The Chemical Brothers"},{video:"https://www.youtube.com/watch?v=9EcjWd-O4jI",delay:7.5,artist:"Technotronic"},{video:"https://www.youtube.com/watch?v=QLpArkPb-YU",delay:5,artist:"10 Second Timer"},{video:"https://www.youtube.com/watch?v=R9PimZnRO5I",delay:12,artist:"10 Second Timer"}],archived_music_videos:[]},animations:{introAnimation:()=>{let e=document.querySelector(".form"),t=document.querySelector(".left-curtain"),a=document.querySelector(".right-curtain"),o=document.querySelector("h1"),i=document.querySelector("h2");t1=gsap.to(o,{duration:5,opacity:0,ease:"power4.out",delay:.95*INSOURCED.app.params.delay,top:"-50%"}),t2=gsap.to(i,{duration:.5,opacity:0,ease:"power4.out",delay:.95*INSOURCED.app.params.delay}),t3=gsap.to(t,{duration:3,left:"-40%",ease:"power4.out",delay:.97*INSOURCED.app.params.delay}),t4=gsap.to(a,{duration:3,right:"-40%",ease:"power4.out",delay:.97*INSOURCED.app.params.delay}),t5=gsap.to(e,{duration:.1,opacity:0,display:"none"}),t6=gsap.fromTo("body",{backgroundColor:"#000"},{backgroundColor:"#000",delay:.3,duration:.5})},songAndDance:()=>{let e=0;dance=gsap.fromTo(".dancing-man-wrapper",{scale:0,opacity:0},{opacity:1,scale:1,duration:1,ease:"elastic.out(1, 0.3)",delay:e})},spinningRecordPlay:()=>{"undefined"==typeof vinylRecord?(vinylRecord=gsap.fromTo(".vinyl-record",{opacity:0,scale:0},{opacity:1,scale:1,duration:1,ease:"elastic.out(1, 0.3)",delay:0}),vinylRecord=gsap.to(".vinyl-record",{display:"block",rotation:360,duration:1.8,repeat:-1,ease:"none"})):vinylRecord.play()},spinningRecordPause:()=>{vinylRecord.pause()},countdown:()=>{gsap.fromTo(".wait-for-it",{opacity:1,fontSize:"10px"},{opacity:0,duration:2,ease:"power4.out",fontSize:"100px"})},resetAnimations:function(){let e=document.querySelector(".form"),t=document.querySelector(".left-curtain"),a=document.querySelector(".right-curtain"),o=document.querySelector("h1"),i=document.querySelector("h2");t1=gsap.timeline(),t1=gsap.to(t,{duration:3,left:"0",ease:"power4.out",delay:0}),t1=gsap.to(a,{duration:3,right:"0",ease:"power4.out",delay:0}),t3=gsap.timeline(),t3=gsap.to(o,{duration:1,opacity:1,ease:"power4.out",delay:2,top:"15%"}),t3=gsap.to(e,{duration:0,opacity:1,display:"flex",delay:3,onComplete:()=>{document.querySelector("h2").innerHTML=""}}),t3=gsap.to(i,{duration:0,opacity:1,ease:"power4.out",delay:4})}},getYouTubeID:e=>(e=e.split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/),void 0!==e[2]?e[2].split(/[^0-9a-z_\-]/i)[0]:e[0]),getGif:()=>{let e=INSOURCED.app.params.curated_gifs;switch(e){case!0:INSOURCED.app.giphy();break;case!1:INSOURCED.app.getCuratedGif()}},getCuratedGif:()=>{let e=INSOURCED.app.params.dance_moves,t=Math.floor(Math.random()*e.length),a=e[t];INSOURCED.app.setGif(a)},setGif:e=>{document.querySelector(".dancing-man-wrapper").style.backgroundImage="url("+e+")",document.querySelector(".dancing-man-wrapper").style.opacity=0,document.querySelector(".dancing-man-wrapper-image").src=e},giphy:()=>{let e=INSOURCED.app.params.curated_gifs,t=INSOURCED.app.params.giphy;if(!e&&t){let e=50,t=Math.floor(300*Math.random())+1,a=encodeURIComponent("dancing");fetch("https://api.giphy.com/v1/gifs/search?api_key=6evYK0BaztKKyI7Fil0kHrpL6SBENnDH&q="+a+"&limit="+e+"&offset="+t+"&rating=R&lang=en").then(e=>e.json()).then(e=>{let t=e.data[Math.floor(Math.random()*e.data.length)].images.original.url;INSOURCED.app.setGif(t)})}},getCuratedVideo:()=>{let e=INSOURCED.app.params.music_videos;e=e.sort(()=>Math.random()-.5);let t=Math.floor(Math.random()*e.length),a=e[t];return a},getYoutubePlaylist:()=>new Promise((e,t)=>{const a=INSOURCED.app.params.youtube_playlist_id,o="AIzaSyApoFvPml1u7xUdlZrBEbinDNqJQAdcGco",i=`https://www.googleapis.com/youtube/v3/playlistItems?part=contentDetails,snippet&maxResults=50&playlistId=${a}&key=${o}`;fetch(i).then(e=>e.json()).then(t=>{e(t)}).catch(e=>{t(e)})}),instantiateYoutubePlayer:e=>{if("undefined"==typeof YT){var t=document.createElement("script");t.src="https://www.youtube.com/player_api",t.id="youtube-api";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a)}else player.loadVideoById(e,0,"default");onYouTubePlayerAPIReady=(()=>{function t(){player.playVideo()}function a(t){let a=t.data;if(1===a&&INSOURCED.app.getGif(),-1===a){let e=player.getVideoData().title,t=document.querySelector(".title");e=e.replace(/\([^)]*\)/g,""),e=e.replace(/\[[^)]*\]/g,""),t.innerHTML=e;let a=document.querySelector(".modal-body-featured-artist");a.innerHTML=e}let i=INSOURCED.app.params.delay,p=setInterval(function(){let t=e,d=player.getCurrentTime(),n=player.getDuration(),r=0;d=Math.round(100*d)/100,n=Math.round(100*n)/100,0===a&&(clearInterval(p),INSOURCED.app.animations.spinningRecordPause(),INSOURCED.app.animations.resetAnimations());let c=i-1-Math.round(d);c=Math.ceil(c),c<=5&&c>0&&c!==o&&(document.querySelector(".wait-for-it").innerHTML=c,INSOURCED.app.animations.countdown(),o=c),d%.25==0&&(halfSeconds=d,r!==halfSeconds&&(halfSeconds===i&&INSOURCED.app.animations.songAndDance(t),r=halfSeconds))})}let o=0;player=new YT.Player("player",{height:"0",width:"0",videoId:e,playerVars:{playsinline:1,controls:0},events:{onReady:t,onStateChange:a}})})},init:()=>{let e=new URLSearchParams(window.location.search),t=!!e.get("v")&&e.get("v"),a=e.get("d")?e.get("d"):INSOURCED.app.params.delay,o=document.querySelector("input"),i=INSOURCED.app.params.curated_videos;if(i){let e=INSOURCED.app.getCuratedVideo();o.value=e.video,t=INSOURCED.app.getYouTubeID(e.video),INSOURCED.app.params.delay=e.delay}if(!i&&t&&(o.value="https://www.youtube.com/watch?v="+t,INSOURCED.app.params.delay=a||INSOURCED.app.params.delay),!i&&INSOURCED.app.params.youtube_playlist_id&&INSOURCED.app.getYoutubePlaylist().then(e=>{let t=e.items,i=Math.floor(Math.random()*t.length),p=t[i],d=p.snippet.resourceId.videoId;o.value="https://www.youtube.com/watch?v="+d,INSOURCED.app.params.delay=a||INSOURCED.app.params.delay}),document.querySelector("button").addEventListener("click",function(){let e=o.value,t=INSOURCED.app.getYouTubeID(e),a=t;gtag("event","click",{event_category:"button",event_label:"Lets Dance"}),INSOURCED.app.animations.introAnimation(),INSOURCED.app.instantiateYoutubePlayer(a),INSOURCED.app.animations.spinningRecordPlay(),window.history.pushState({},"",window.location.origin);var i=document.querySelector(".modal-body-share-url");i.innerHTML=window.location.href+"?v="+encodeURIComponent(a)+"&d="+encodeURIComponent(INSOURCED.app.params.delay),document.querySelector(".vinyl-record").addEventListener("click",function(){document.querySelector(".modal").classList.add("show")}),document.querySelector(".modal-close").addEventListener("click",function(){document.querySelector(".modal").classList.remove("show")})}),e&&i){let t=!!e.get("v")&&e.get("v"),a=!!e.get("d")&&e.get("d");t&&(INSOURCED.app.params.delay=a?parseInt(a):INSOURCED.app.params.delay,o.value="https://www.youtube.com/watch?v="+t)}}},document.addEventListener("DOMContentLoaded",function(e){INSOURCED.app.init()});